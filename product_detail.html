{% extends 'store/base.html' %}
{% load static %}

{% block title %}{{ product.name }} - ShopEasy{% endblock %}

{% block extra_css %}
<style>
    /* Product Detail Container */
    .product-detail-container {
        background: white;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        margin: 2rem 0;
    }

    .product-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 3rem;
        padding: 2rem;
    }

    @media (max-width: 992px) {
        .product-content {
            grid-template-columns: 1fr;
            gap: 2rem;
        }
    }

    /* Product Gallery */
    .product-gallery {
        position: sticky;
        top: 2rem;
    }

    .main-image {
        height: 400px;
        border-radius: 15px;
        overflow: hidden;
        margin-bottom: 1rem;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        position: relative;
    }

    .main-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
    }

    .main-image:hover img {
        transform: scale(1.05);
    }

    .image-badge {
        position: absolute;
        top: 15px;
        right: 15px;
        padding: 8px 15px;
        border-radius: 20px;
        font-size: 0.9rem;
        font-weight: 600;
        color: white;
        z-index: 2;
    }

    .badge-new {
        background: linear-gradient(135deg, #4f46e5 0%, #4338ca 100%);
    }

    .badge-sale {
        background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
    }

    .badge-trending {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    }

    .thumbnails {
        display: flex;
        gap: 1rem;
        overflow-x: auto;
        padding: 1rem 0;
    }

    .thumbnail {
        width: 80px;
        height: 80px;
        border-radius: 10px;
        overflow: hidden;
        cursor: pointer;
        border: 3px solid transparent;
        transition: all 0.3s ease;
        flex-shrink: 0;
    }

    .thumbnail.active {
        border-color: #4f46e5;
        box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
    }

    .thumbnail img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    /* Product Info */
    .product-info {
        padding: 1rem 0;
    }

    .product-category {
        display: inline-block;
        padding: 6px 12px;
        background: #f3f4f6;
        color: #4f46e5;
        border-radius: 20px;
        font-size: 0.9rem;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 1rem;
    }

    .product-title {
        font-size: 2.5rem;
        font-weight: 700;
        color: #1f2937;
        margin-bottom: 1rem;
        line-height: 1.2;
    }

    .product-rating {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1.5rem;
    }

    .stars {
        color: #fbbf24;
    }

    .rating-count {
        color: #6b7280;
        font-size: 0.95rem;
    }

    .product-price {
        font-size: 2.5rem;
        font-weight: 700;
        color: #4f46e5;
        margin-bottom: 1.5rem;
    }

    .original-price {
        font-size: 1.5rem;
        color: #9ca3af;
        text-decoration: line-through;
        margin-right: 10px;
    }

    .discount-badge {
        display: inline-block;
        padding: 5px 12px;
        background: #fef3c7;
        color: #92400e;
        border-radius: 4px;
        font-size: 0.9rem;
        font-weight: 600;
        margin-left: 10px;
    }

    .product-description {
        color: #4b5563;
        line-height: 1.8;
        margin-bottom: 2rem;
        font-size: 1.1rem;
    }

    /* Product Meta */
    .product-meta {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
        padding: 1.5rem;
        background: #f9fafb;
        border-radius: 12px;
    }

    .meta-item {
        text-align: center;
    }

    .meta-label {
        display: block;
        color: #6b7280;
        font-size: 0.9rem;
        margin-bottom: 0.5rem;
    }

    .meta-value {
        font-weight: 600;
        color: #1f2937;
        font-size: 1.1rem;
    }

    /* Stock Status */
    .stock-status {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 0.95rem;
        font-weight: 600;
        margin-bottom: 1.5rem;
    }

    .stock-in {
        background: #d1fae5;
        color: #065f46;
    }

    .stock-low {
        background: #fef3c7;
        color: #92400e;
    }

    .stock-out {
        background: #fee2e2;
        color: #991b1b;
    }

    /* Quantity Selector */
    .quantity-selector {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 2rem;
    }

    .quantity-label {
        font-weight: 600;
        color: #1f2937;
    }

    .quantity-control {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .quantity-btn {
        width: 40px;
        height: 40px;
        border: 2px solid #e5e7eb;
        background: white;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 1.2rem;
        color: #4b5563;
        transition: all 0.3s ease;
    }

    .quantity-btn:hover {
        border-color: #4f46e5;
        color: #4f46e5;
    }

    .quantity-input {
        width: 70px;
        height: 40px;
        border: 2px solid #e5e7eb;
        border-radius: 8px;
        text-align: center;
        font-size: 1.1rem;
        font-weight: 600;
        color: #1f2937;
    }

    .max-quantity {
        color: #6b7280;
        font-size: 0.9rem;
    }

    /* Action Buttons */
    .action-buttons {
        display: flex;
        gap: 1rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
    }

    .btn-buy-now {
        flex: 2;
        min-width: 200px;
        background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
        color: white;
        border: none;
        padding: 1rem 2rem;
        border-radius: 12px;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        transition: all 0.3s ease;
        text-decoration: none;
    }

    .btn-buy-now:hover {
        background: linear-gradient(135deg, #fb923c 0%, #f97316 100%);
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(249, 115, 22, 0.4);
    }

    .btn-add-to-cart {
        flex: 1;
        min-width: 150px;
        background: linear-gradient(135deg, #4f46e5 0%, #4338ca 100%);
        color: white;
        border: none;
        padding: 1rem 2rem;
        border-radius: 12px;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        transition: all 0.3s ease;
    }

    .btn-add-to-cart:hover {
        background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(79, 70, 229, 0.4);
    }

    .btn-wishlist {
        width: 60px;
        height: 60px;
        border: 2px solid #e5e7eb;
        background: white;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 1.3rem;
        color: #4b5563;
        transition: all 0.3s ease;
    }

    .btn-wishlist:hover {
        border-color: #ef4444;
        color: #ef4444;
        background: #fef2f2;
    }

    .btn-wishlist.active {
        border-color: #ef4444;
        color: #ef4444;
        background: #fef2f2;
    }

    /* Additional Options */
    .additional-options {
        margin-top: 2rem;
        padding-top: 2rem;
        border-top: 1px solid #e5e7eb;
    }

    .option-group {
        margin-bottom: 1.5rem;
    }

    .option-label {
        font-weight: 600;
        color: #1f2937;
        margin-bottom: 0.8rem;
        display: block;
    }

    .color-options {
        display: flex;
        gap: 0.8rem;
        flex-wrap: wrap;
    }

    .color-option {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        border: 3px solid transparent;
        transition: all 0.3s ease;
    }

    .color-option:hover {
        transform: scale(1.1);
    }

    .color-option.active {
        border-color: #1f2937;
    }

    .size-options {
        display: flex;
        gap: 0.8rem;
        flex-wrap: wrap;
    }

    .size-option {
        width: 50px;
        height: 50px;
        border: 2px solid #e5e7eb;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-weight: 600;
        color: #4b5563;
        transition: all 0.3s ease;
    }

    .size-option:hover {
        border-color: #4f46e5;
        color: #4f46e5;
    }

    .size-option.active {
        background: #4f46e5;
        color: white;
        border-color: #4f46e5;
    }

    /* Delivery Info */
    .delivery-info {
        background: #f9fafb;
        padding: 1.5rem;
        border-radius: 12px;
        margin-top: 2rem;
    }

    .delivery-item {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1rem;
    }

    .delivery-item:last-child {
        margin-bottom: 0;
    }

    .delivery-icon {
        color: #10b981;
        font-size: 1.2rem;
    }

    /* Related Products */
    .related-products {
        margin-top: 4rem;
    }

    .section-title {
        text-align: center;
        margin-bottom: 2rem;
        font-size: 2rem;
        color: #1f2937;
        position: relative;
    }

    .section-title::after {
        content: '';
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 100px;
        height: 4px;
        background: #f97316;
        border-radius: 2px;
    }

    .related-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 2rem;
        margin-top: 2rem;
    }

    /* Tabs */
    .product-tabs {
        margin-top: 3rem;
    }

    .tabs {
        display: flex;
        border-bottom: 2px solid #e5e7eb;
        margin-bottom: 2rem;
    }

    .tab {
        padding: 1rem 2rem;
        background: none;
        border: none;
        font-size: 1.1rem;
        color: #6b7280;
        cursor: pointer;
        position: relative;
        transition: all 0.3s ease;
        font-weight: 500;
    }

    .tab:hover {
        color: #4f46e5;
    }

    .tab.active {
        color: #4f46e5;
        font-weight: 600;
    }

    .tab.active::after {
        content: '';
        position: absolute;
        bottom: -2px;
        left: 0;
        width: 100%;
        height: 2px;
        background: #4f46e5;
    }

    .tab-content {
        display: none;
        padding: 2rem;
        background: white;
        border-radius: 12px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    }

    .tab-content.active {
        display: block;
        animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    /* Reviews */
    .reviews {
        margin-top: 2rem;
    }

    .review {
        padding: 1.5rem;
        border-bottom: 1px solid #e5e7eb;
    }

    .review:last-child {
        border-bottom: none;
    }

    .review-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }

    .reviewer-name {
        font-weight: 600;
        color: #1f2937;
    }

    .review-date {
        color: #6b7280;
        font-size: 0.9rem;
    }

    .review-content {
        line-height: 1.6;
        color: #4b5563;
    }

    /* Breadcrumb */
    .breadcrumb {
        margin: 1rem 0 2rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: #6b7280;
        font-size: 0.95rem;
    }

    .breadcrumb a {
        color: #4f46e5;
        text-decoration: none;
        transition: all 0.3s ease;
    }

    .breadcrumb a:hover {
        text-decoration: underline;
    }

    .breadcrumb span {
        color: #1f2937;
        font-weight: 500;
    }

    /* Messages */
    .message {
        padding: 1rem 1.5rem;
        border-radius: 8px;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        gap: 1rem;
        animation: slideInRight 0.5s ease;
    }

    @keyframes slideInRight {
        from { transform: translateX(100px); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }

    .message-success {
        background: #d1fae5;
        color: #065f46;
        border-left: 4px solid #10b981;
    }

    .message-error {
        background: #fee2e2;
        color: #991b1b;
        border-left: 4px solid #ef4444;
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
        <a href="{% url 'home' %}">Home</a>
        <i class="fas fa-chevron-right"></i>
        <a href="{% url 'product_list' %}">Products</a>
        <i class="fas fa-chevron-right"></i>
        <span>{{ product.name|truncatechars:30 }}</span>
    </nav>

    <!-- Messages -->
    {% if messages %}
    <div class="messages">
        {% for message in messages %}
        <div class="message message-{% if message.tags == 'error' %}error{% else %}success{% endif %}">
            <i class="fas fa-{% if message.tags == 'error' %}exclamation-circle{% else %}check-circle{% endif %}"></i>
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Product Detail Container -->
    <div class="product-detail-container">
        <div class="product-content">
            <!-- Product Gallery -->
            <div class="product-gallery">
                <!-- Main Image -->
                <div class="main-image">
                    {% if product.stock < 10 and product.stock > 0 %}
                    <div class="image-badge badge-sale">Low Stock</div>
                    {% elif product.stock == 0 %}
                    <div class="image-badge badge-sale" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);">Sold Out</div>
                    {% else %}
                    <div class="image-badge badge-new">New</div>
                    {% endif %}
                    <img src="{{ product.get_image_url }}" alt="{{ product.name }}" id="mainImage">
                </div>

                <!-- Thumbnails -->
                <div class="thumbnails">
                    <div class="thumbnail active" onclick="changeImage('{{ product.get_image_url }}')">
                        <img src="{{ product.get_image_url }}" alt="Main Image">
                    </div>
                    <div class="thumbnail" onclick="changeImage('https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80')">
                        <img src="https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Angle View">
                    </div>
                    <div class="thumbnail" onclick="changeImage('https://images.unsplash.com/photo-1572635196237-14b3f281503f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80')">
                        <img src="https://images.unsplash.com/photo-1572635196237-14b3f281503f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Close-up">
                    </div>
                    <div class="thumbnail" onclick="changeImage('https://images.unsplash.com/photo-1556656793-08538906a9f8?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80')">
                        <img src="https://images.unsplash.com/photo-1556656793-08538906a9f8?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="In Use">
                    </div>
                </div>
            </div>

            <!-- Product Info -->
            <div class="product-info">
                <div class="product-category">{{ product.category.name }}</div>
                <h1 class="product-title">{{ product.name }}</h1>
                
                <!-- Rating -->
                <div class="product-rating">
                    <div class="stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                    </div>
                    <span class="rating-count">4.5 (42 reviews)</span>
                </div>

                <!-- Price -->
                <div class="product-price">
                    <span class="original-price">${{ product.price|add:"100" }}</span>
                    ${{ product.price }}
                    <span class="discount-badge">Save $100</span>
                </div>

                <!-- Description -->
                <p class="product-description">{{ product.description }}</p>

                <!-- Stock Status -->
                {% if product.stock > 10 %}
                <div class="stock-status stock-in">
                    <i class="fas fa-check-circle"></i>
                    In Stock - Ready to Ship
                </div>
                {% elif product.stock > 0 %}
                <div class="stock-status stock-low">
                    <i class="fas fa-exclamation-triangle"></i>
                    Low Stock - Only {{ product.stock }} left!
                </div>
                {% else %}
                <div class="stock-status stock-out">
                    <i class="fas fa-times-circle"></i>
                    Out of Stock
                </div>
                {% endif %}

                <!-- Product Meta -->
                <div class="product-meta">
                    <div class="meta-item">
                        <span class="meta-label">SKU</span>
                        <span class="meta-value">PROD{{ product.id|stringformat:"06d" }}</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Brand</span>
                        <span class="meta-value">{{ product.category.name }}</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Shipping</span>
                        <span class="meta-value">Free</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Returns</span>
                        <span class="meta-value">30 Days</span>
                    </div>
                </div>

                <!-- Quantity Selector -->
                <div class="quantity-selector">
                    <span class="quantity-label">Quantity:</span>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="decreaseQuantity()">-</button>
                        <input type="number" id="quantity" name="quantity" value="1" min="1" max="{{ product.stock }}" class="quantity-input">
                        <button class="quantity-btn" onclick="increaseQuantity()">+</button>
                    </div>
                    <span class="max-quantity">Max: {{ product.stock }}</span>
                </div>

                <!-- Action Buttons -->
               <!-- Action Buttons -->
<div class="action-buttons">
    {% if product.stock > 0 %}
    <form method="post" action="{% url 'buy_now' product.id %}" id="buyNowForm" style="display: flex; flex: 2; min-width: 200px;">
        {% csrf_token %}
        <input type="hidden" name="quantity" id="buyNowQuantity" value="1">
        <button type="submit" class="btn-buy-now">
            <i class="fas fa-bolt"></i> BUY NOW
        </button>
    </form>
    
    <form method="post" action="{% url 'add_to_cart' product.id %}" id="addToCartForm" style="display: flex; flex: 1; min-width: 150px;">
        {% csrf_token %}
        <input type="hidden" name="quantity" id="addToCartQuantity" value="1">
        <button type="submit" class="btn-add-to-cart">
            <i class="fas fa-cart-plus"></i> ADD TO CART
        </button>
    </form>
    
    <button type="button" class="btn-wishlist" onclick="toggleWishlist()">
        <i class="far fa-heart"></i>
    </button>
    {% else %}
    <button class="btn-buy-now" style="background: #9ca3af; cursor: not-allowed;" disabled>
        <i class="fas fa-times"></i> OUT OF STOCK
    </button>
    <button class="btn-add-to-cart" style="background: #9ca3af; cursor: not-allowed;" disabled>
        <i class="fas fa-cart-plus"></i> UNAVAILABLE
    </button>
    <button type="button" class="btn-wishlist" onclick="notifyWhenAvailable()">
        <i class="fas fa-bell"></i>
    </button>
    {% endif %}
</div>
                <!-- Additional Options -->
                <div class="additional-options">
                    <div class="option-group">
                        <label class="option-label">Color:</label>
                        <div class="color-options">
                            <div class="color-option active" style="background: #4f46e5;" onclick="selectColor('#4f46e5', 'Indigo')"></div>
                            <div class="color-option" style="background: #1f2937;" onclick="selectColor('#1f2937', 'Black')"></div>
                            <div class="color-option" style="background: #6b7280;" onclick="selectColor('#6b7280', 'Gray')"></div>
                            <div class="color-option" style="background: #f97316;" onclick="selectColor('#f97316', 'Orange')"></div>
                            <div class="color-option" style="background: #10b981;" onclick="selectColor('#10b981', 'Green')"></div>
                        </div>
                    </div>

                    <div class="option-group">
                        <label class="option-label">Size:</label>
                        <div class="size-options">
                            <div class="size-option active">S</div>
                            <div class="size-option">M</div>
                            <div class="size-option">L</div>
                            <div class="size-option">XL</div>
                            <div class="size-option">XXL</div>
                        </div>
                    </div>
                </div>

                <!-- Delivery Info -->
                <div class="delivery-info">
                    <div class="delivery-item">
                        <i class="fas fa-shipping-fast delivery-icon"></i>
                        <div>
                            <strong>Free Shipping</strong>
                            <p style="color: #6b7280; margin-top: 0.3rem;">On orders over $50</p>
                        </div>
                    </div>
                    <div class="delivery-item">
                        <i class="fas fa-undo delivery-icon"></i>
                        <div>
                            <strong>Easy Returns</strong>
                            <p style="color: #6b7280; margin-top: 0.3rem;">30-day return policy</p>
                        </div>
                    </div>
                    <div class="delivery-item">
                        <i class="fas fa-shield-alt delivery-icon"></i>
                        <div>
                            <strong>Secure Payment</strong>
                            <p style="color: #6b7280; margin-top: 0.3rem;">100% secure transactions</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Product Tabs -->
        <div class="product-tabs">
            <div class="tabs">
                <button class="tab active" onclick="switchTab('description')">Description</button>
                <button class="tab" onclick="switchTab('specifications')">Specifications</button>
                <button class="tab" onclick="switchTab('reviews')">Reviews (42)</button>
                <button class="tab" onclick="switchTab('shipping')">Shipping & Returns</button>
            </div>

            <div id="description" class="tab-content active">
                <h3>Product Description</h3>
                <p>{{ product.description }}</p>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            </div>

            <div id="specifications" class="tab-content">
                <h3>Product Specifications</h3>
                <table style="width: 100%; border-collapse: collapse;">
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;"><strong>Brand</strong></td>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;">{{ product.category.name }}</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;"><strong>Model</strong></td>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;">PROD{{ product.id|stringformat:"06d" }}</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;"><strong>Material</strong></td>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;">Premium Quality</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;"><strong>Weight</strong></td>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;">500g</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;"><strong>Dimensions</strong></td>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;">10 x 10 x 5 cm</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;"><strong>Warranty</strong></td>
                        <td style="padding: 12px; border-bottom: 1px solid #e5e7eb;">1 Year</td>
                    </tr>
                </table>
            </div>

            <div id="reviews" class="tab-content">
                <h3>Customer Reviews</h3>
                <div class="reviews">
                    <div class="review">
                        <div class="review-header">
                            <span class="reviewer-name">John Doe</span>
                            <span class="review-date">2 days ago</span>
                        </div>
                        <div class="stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">Excellent product! Highly recommended. The quality is amazing and it works perfectly.</p>
                    </div>
                    <div class="review">
                        <div class="review-header">
                            <span class="reviewer-name">Sarah Smith</span>
                            <span class="review-date">1 week ago</span>
                        </div>
                        <div class="stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                        </div>
                        <p class="review-content">Great value for money. The product arrived quickly and was exactly as described.</p>
                    </div>
                </div>
            </div>

            <div id="shipping" class="tab-content">
                <h3>Shipping & Returns</h3>
                <p><strong>Shipping:</strong> Free shipping on orders over $50. Standard delivery takes 3-5 business days. Express shipping available at checkout.</p>
                <p><strong>Returns:</strong> Easy 30-day return policy. Items must be in original condition with all tags attached. Some restrictions may apply.</p>
                <p><strong>International Shipping:</strong> We ship to over 50 countries worldwide. Shipping costs and delivery times vary by location.</p>
            </div>
        </div>
    </div>


{% endblock %}

{% block extra_js %}
<script>
    // Change main image
    function changeImage(imageUrl) {
        document.getElementById('mainImage').src = imageUrl;
        
        // Update active thumbnail
        document.querySelectorAll('.thumbnail').forEach(thumb => {
            thumb.classList.remove('active');
        });
        event.currentTarget.classList.add('active');
    }

    // Switch tabs
    function switchTab(tabName) {
        // Hide all tabs
        document.querySelectorAll('.tab-content').forEach(tab => {
            tab.classList.remove('active');
        });
        
        // Remove active class from all tab buttons
        document.querySelectorAll('.tab').forEach(tab => {
            tab.classList.remove('active');
        });
        
        // Show selected tab
        document.getElementById(tabName).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    // Quantity controls
  function increaseQuantity() {
    const quantityInput = document.getElementById('quantity');
    const maxQuantity = parseInt(quantityInput.dataset.max);
    const currentValue = parseInt(quantityInput.value);

    if (currentValue < maxQuantity) {
        quantityInput.value = currentValue + 1;
        updateFormQuantities();
    }
}


    function decreaseQuantity() {
        const quantityInput = document.getElementById('quantity');
        const currentValue = parseInt(quantityInput.value);
        
        if (currentValue > 1) {
            quantityInput.value = currentValue - 1;
            updateFormQuantities();
        }
    }

    // Update form hidden inputs
    function updateFormQuantities() {
        const quantity = document.getElementById('quantity').value;
        document.getElementById('buyNowQuantity').value = quantity;
        document.getElementById('addToCartQuantity').value = quantity;
    }

    // Color selection
    function selectColor(colorCode, colorName) {
        document.querySelectorAll('.color-option').forEach(option => {
            option.classList.remove('active');
        });
        event.currentTarget.classList.add('active');
        
        // In a real app, you would update product details based on color
        console.log(`Selected color: ${colorName} (${colorCode})`);
    }

    // Size selection
    document.querySelectorAll('.size-option').forEach(option => {
        option.addEventListener('click', function() {
            document.querySelectorAll('.size-option').forEach(opt => {
                opt.classList.remove('active');
            });
            this.classList.add('active');
            
            // In a real app, you would update product details based on size
            console.log(`Selected size: ${this.textContent}`);
        });
    });

    // Wishlist toggle
    function toggleWishlist() {
        const wishlistBtn = event.currentTarget;
        const icon = wishlistBtn.querySelector('i');
        
        if (wishlistBtn.classList.contains('active')) {
            wishlistBtn.classList.remove('active');
            icon.classList.remove('fas');
            icon.classList.add('far');
            showMessage('Removed from wishlist', 'success');
        } else {
            wishlistBtn.classList.add('active');
            icon.classList.remove('far');
            icon.classList.add('fas');
            showMessage('Added to wishlist', 'success');
        }
    }

    // Notify when available
    function notifyWhenAvailable() {
        showMessage('We will notify you when this product is back in stock!', 'success');
    }

    // Show message
    function showMessage(text, type) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message message-${type}`;
        messageDiv.innerHTML = `
            <i class="fas fa-${type === 'error' ? 'exclamation-circle' : 'check-circle'}"></i>
            ${text}
        `;
        
        // Insert after breadcrumb
        const container = document.querySelector('.container');
        const firstChild = container.firstChild;
        container.insertBefore(messageDiv, firstChild);
        
        // Remove after 5 seconds
        setTimeout(() => {
            messageDiv.remove();
        }, 5000);
    }

    // Form submissions
    document.getElementById('buyNowForm')?.addEventListener('submit', function(e) {
        const button = this.querySelector('button[type="submit"]');
        const originalText = button.innerHTML;
        
        // Show loading state
        button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
        button.disabled = true;
        
        // In production, this would submit to your checkout endpoint
        // For demo, we'll simulate a delay
        setTimeout(() => {
            showMessage('Redirecting to checkout...', 'success');
            
            // Reset button
            setTimeout(() => {
                button.innerHTML = originalText;
                button.disabled = false;
                
                // In a real app, you would redirect to checkout
                // window.location.href = "/checkout/?product={{ product.id }}&quantity=" + quantity;
            }, 1000);
        }, 1500);
        
        // For demo, prevent actual form submission
        e.preventDefault();
    });

    document.getElementById('addToCartForm')?.addEventListener('submit', function(e) {
        const button = this.querySelector('button[type="submit"]');
        const originalText = button.innerHTML;
        
        // Show loading state
        button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Adding...';
        button.disabled = true;
        
        // In production, this would submit to your add-to-cart endpoint
        // For demo, we'll simulate a delay
        setTimeout(() => {
            showMessage('Product added to cart!', 'success');
            
            // Reset button
            setTimeout(() => {
                button.innerHTML = originalText;
                button.disabled = false;
                
                // In a real app, you might update cart count in header
                // updateCartCount();
            }, 1000);
        }, 1000);
        
        // For demo, prevent actual form submission
        e.preventDefault();
    });

    // Initialize quantity sync
    document.addEventListener('DOMContentLoaded', function() {
        updateFormQuantities();
        
        // Listen for manual quantity input
        document.getElementById('quantity').addEventListener('input', updateFormQuantities);
        
        // Initialize first color and size as active
        if (!document.querySelector('.color-option.active')) {
            document.querySelector('.color-option').classList.add('active');
        }
        if (!document.querySelector('.size-option.active')) {
            document.querySelector('.size-option').classList.add('active');
        }
    });
</script>
{% endblock %}